<div class="flex flex-col md:flex-row h-full md:h-[130vh] justify-center items-center bg-gray-100">
  <div class="hidden md:block h-full w-1/3 bg-emerald-green"></div>

  <div class="w-auto mx-5 md:mx-0 my-20 md:w-9/12 lg:w-1/2 p-8 md:p-16 bg-white shadow-lg relative z-20 rounded-3xl md:transform md:-translate-x-1/4">
    <h1 class="text-3xl md:text-5xl font-bold text-emerald-green mb-6">Inscription</h1>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" method="post" action="#">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <div>
          <label for="lastname" class="block text-xl font-bold text-emerald-green mb-2">Nom</label>
          <input type="text" id="lastname" formControlName="lastname"
            [ngClass]="{'bg-red-600': form.get('lastname')?.invalid && form.get('lastname')?.touched}"
            class="bg-emerald-green pl-2 bg-opacity-30 rounded-xl h-12 w-full mb-1" />
          <span *ngIf="form.get('lastname')?.invalid && form.get('lastname')?.touched" class="text-red-600">
            Veuillez entrer votre nom
          </span>
        </div>

        <div>
          <label for="firstname" class="block text-xl font-bold text-emerald-green mb-2">Prénom</label>
          <input type="text" id="firstname" formControlName="firstname"
            [ngClass]="{'bg-red-600': form.get('firstname')?.invalid && form.get('firstname')?.touched}"
            class="bg-emerald-green pl-2 bg-opacity-30 rounded-xl h-12 w-full mb-1" />
          <span *ngIf="form.get('firstname')?.invalid && form.get('firstname')?.touched" class="text-red-600">
            Veuillez entrer votre prénom
          </span>
        </div>

        <div>
          <label for="email" class="block text-xl font-bold text-emerald-green mb-2">E-mail</label>
          <input type="email" id="email" formControlName="email"
            [ngClass]="{'bg-red-600': form.get('email')?.invalid && form.get('email')?.touched}"
            class="bg-emerald-green pl-2 bg-opacity-30 rounded-xl h-12 w-full mb-1" />
          <span *ngIf="form.get('email')?.invalid && form.get('email')?.touched" class="text-red-600">
            Veuillez entrer un email correct
          </span>
        </div>

        <div>
          <label for="phoneNumber" class="block text-xl font-bold text-emerald-green mb-2">Numéro de téléphone</label>
          <input type="tel" id="tel" formControlName="phoneNumber"
            [ngClass]="{'bg-red-600': form.get('phoneNumber')?.invalid && form.get('phoneNumber')?.touched}"
            class="bg-emerald-green pl-2 bg-opacity-30 rounded-xl h-12 w-full mb-1" />
          <span *ngIf="form.get('phoneNumber')?.invalid && form.get('phoneNumber')?.touched" class="text-red-600">
            Veuillez entrer votre numéro
          </span>
        </div>

        <div>
          <label for="birthdate" class="block text-xl font-bold text-emerald-green mb-2">Date de naissance</label>
          <input type="date" id="date" formControlName="birthdate"
            [ngClass]="{'bg-red-600': form.get('birthdate')?.invalid && form.get('birthdate')?.touched}"
            class="bg-emerald-green pl-2 bg-opacity-30 rounded-xl h-12 w-full mb-1" />
          <span *ngIf="form.get('birthdate')?.invalid && form.get('birthdate')?.touched" class="text-red-600">
            Veuillez entrer votre date de naissance
          </span>
        </div>

        <div>
          <label for="password" class="block text-xl font-bold text-emerald-green mb-2">Mot de passe</label>
          <input type="password" id="password" formControlName="password"
            [ngClass]="{'bg-red-600': form.get('password')?.invalid && form.get('password')?.touched}"
            class="bg-emerald-green pl-2 bg-opacity-30 rounded-xl h-12 w-full mb-1" />
            <span *ngIf="form.get('password')?.errors?.['required'] && form.get('password')?.touched" class="text-red-600">Mot de passe requis</span>
            <span *ngIf="form.get('password')?.errors?.['minlength'] && form.get('password')?.touched" class="text-red-600">Le mot de passe doit contenir au moins 6 caractères</span>
        </div>

        <div>
          <label for="confirmPassword" class="block text-xl font-bold text-emerald-green mb-2">Confirmation du mot de
            passe</label>
          <input type="password" id="confirmPassword" formControlName="confirmPassword"
            [ngClass]="{'bg-red-600': form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched}"
            class="bg-emerald-green pl-2 bg-opacity-30 rounded-xl h-12 w-full mb-1" />
            <span *ngIf="form.get('confirmPassword')?.errors?.['required'] && form.get('confirmPassword')?.touched" class="text-red-600">La confirmation du mot de passe est requise</span>
            <span *ngIf="form.errors?.['passwordMismatch'] && form.get('confirmPassword')?.touched" class="text-red-600">Les mots de passe ne correspondent pas</span>
        </div>
      </div>

      <div class="mt-4">
        <p class="block text-xl font-bold text-emerald-green mb-2">Conditions et politiques du site</p>
        <div class="flex items-start mb-2">
          <input type="checkbox" id="site" formControlName="terms" class="mr-2 mt-1" />
          <label for="site" class="text-xs">
            * J'accepte les <a href="/conditions-generales-de-vente" class="text-custom-blue">Conditions Générales de
              Vente</a> et les <a href="conditions-generales-utilisation" class="text-custom-blue">Conditions Générales
              d'Utilisation</a>.
          </label>
        </div>
        <span class="text-red-600 text-xs"
          *ngIf="form.get('terms')?.invalid && (form.get('terms')?.touched || formSubmitted)">
          Veuillez accepter les conditions générales.
        </span>

        <div class="flex items-start mt-2">
          <input type="checkbox" id="communications" formControlName="communications" class="mr-2 mt-1" />
          <label for="communications" class="text-xs">J'accepte de recevoir les communications par e-mail</label>
        </div>
      </div>

      <div *ngIf="successMessage" class="text-green-600 font-bold my-4">
        {{ successMessage }}
      </div>
      <div *ngIf="errorMessage" class="text-red-600 font-bold my-4">
        {{ errorMessage }}
      </div>

      <div *ngIf="errors.length > 0" class="bg-red-100 mt-5 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        <strong class="font-semibold">Erreur :</strong>
        <ul class="list-disc ml-5 mt-2">
          <li *ngFor="let error of errors">{{ error }}</li>
        </ul>
      </div>

      <button type="submit"
        class="bg-emerald-green w-full px-7 py-3 rounded-xl font-bold text-white text-xl mt-6 hover:bg-mobalpa-green">
        S'inscrire
      </button>
    </form>

    <a href="/auth/connexion" class="block text-center text-l mt-6 hover:underline font-normal text-emerald-green">
      Vous avez déjà un compte ? Connectez-vous !
    </a>
  </div>
</div>